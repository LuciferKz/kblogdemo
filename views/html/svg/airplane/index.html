<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="http://www.softwhy.com/" />
<meta name="viewport" content="width=device-width,initial-scale=1;">
<title></title>
<style>
* {
  margin: 0px;
  padding: 0px;
}
body {
    background-color: #000; 
}
svg {
  display: block;
  width: 100%;
}
.path1{
    fill:none;
    stroke:#fff;
    stroke-linecap:round;
    stroke-width:5px;
}
.path1{
    stroke-dasharray:19.93 19.93;
}
.airplane{
    transform-origin: 30% 50%;
}
#debug {
  color: #FFF;
}
</style>
</head>
<body>
<svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 1679 329.43">
  <path 
        class="path1"
        transform="translate(779.5 296.93)"
        d="M-747.08,22.18c119.73,1.12,562.74,4.88,663.68-.3,117-6,382.48-13.5,450-102s115.49-204-7.5-214.09c-113.84-9.35-94.57,262.64,210,302.58,190.82,25,274.81,23.07,308.29,19.56"
        stroke="red"
        fill="none" />
        <!-- rotate="auto" -->
  <animateMotion
    id="animateMotion"
    xlink:href="#pairplane"
    path="M-747.08,22.18c119.73,1.12,562.74,4.88,663.68-.3,117-6,382.48-13.5,450-102s115.49-204-7.5-214.09c-113.84-9.35-94.57,262.64,210,302.58,190.82,25,274.81,23.07,308.29,19.56"
    dur="2s"
    begin="1s"
    from="50"
    to="100"
    fill="freeze">
  </animateMotion>
  <g id="pairplane">
    <image 
        xlink:href="img/rocket.png" 
        transform="translate(-50 -60)"
        x="779.5" y="294.93"
        class="airplane"
        height="132" width="84" />
  </g>
</svg>
<div id="debug"></div>
<script>
    var oDomSvg = document.getElementById('svg');
    var oDomAnimate = document.getElementById('animateMotion');

    document.onclick = function () {
      !flag ? startAnimation() : endAnimation();
    }
    var flag = 0
    var currentTime = 0
    var startAnimation = function () {
      flag = 1
      oDomAnimate.beginElementAt(0);
      // setTimeout(() => {
      //   endAnimation()
      // }, 0)
      console.log(oDomAnimate.__proto__)
    }
    var endAnimation = function () {
      flag = 0
      document.getElementById('debug').innerHTML = oDomAnimate.endElementAt
      const startTime = oDomAnimate.getStartTime()
      const endAt = 1 - (oDomAnimate.getCurrentTime() - startTime)
      console.log(`
        currentTime: ${oDomAnimate.getCurrentTime()},
        dur: ${oDomAnimate.getSimpleDuration()},
        startTime: ${startTime},
        elementTiming: ${oDomAnimate.elementTiming},
        endAt: ${endAt}
      `)
      currentTime = endAt;
      oDomAnimate.endElementAt(endAt);
    }

    
</script>
</body>
</html>